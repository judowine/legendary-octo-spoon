# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## 重要: 日本語使用ルール

**このリポジトリで作業する際は、必ず日本語でコミュニケーションを取ってください。**

- ユーザーへの応答は日本語で行う
- コミットメッセージは日本語で記述する
- ドキュメントの編集・追加は日本語で行う（`comprehensive-guide.md`は英語のまま）
- エラーメッセージの説明も日本語で行う

このリポジトリは日本語話者向けの学習教材であり、日本語でのコミュニケーションが最も適切です。

---

## リポジトリの概要

このリポジトリは、Kotlin/Ktorを使用したモバイル向けBFF（Backend-For-Frontend）開発を学習するための**ドキュメント専用リポジトリ**です。実装コードは含まれておらず、日本語と英語の包括的な学習資料で構成されています。対象者は、バックエンド経験がほぼない中級Kotlinエンジニアで、プロダクションレベルのモバイルAPIを構築できるようになることを目指しています。

**重要**: このリポジトリには**ドキュメントのみ**が含まれており、実装コードベースはありません。概念をmarkdownファイル内のコード例を通じて教えています。

## リポジトリ構造

```
legendary-octo-spoon/
├── docs/                    # すべてのドキュメントファイル
│   ├── index.md            # 日本語学習ロードマップ（17-21週間）
│   ├── comprehensive-guide.md  # 英語プロダクションガイド（詳細）
│   ├── part0_web_and_ktor_basics.md        # Part 0: Webの基礎とKtor
│   ├── part1_http_and_network.md           # Part 1: HTTPとネットワーク
│   ├── part2_docker_basics.md              # Part 2: Docker基礎
│   ├── part3_postgresql_and_exposed.md     # Part 3: PostgreSQLとExposed
│   ├── part4_authentication.md             # Part 4: 認証
│   ├── part5_backend_integration.md        # Part 5: バックエンド統合
│   ├── part6_resilience_and_observability.md  # Part 6: レジリエンスと可観測性
│   ├── part7_testing_and_cicd.md           # Part 7: テストとCI/CD
│   └── part8_aws_deployment_and_mobile_optimization.md  # Part 8: AWSデプロイとモバイル最適化
└── README.md               # リポジトリ識別用
```

## ドキュメント構成

### 2つの学習パス

1. **日本語段階的ガイド** (`index.md`および`partN_*.md`): 17-21週間かけて基礎からAWSデプロイまでを段階的に学ぶ8部構成のロードマップ
2. **英語プロダクションガイド** (`comprehensive-guide.md`): プロダクションレベルのKtor BFFシステムのための実戦パターンとアーキテクチャ決定事項

### カバーする内容

このドキュメントで学べる内容：
- **Ktor 3.xフレームワーク**: モダンなコルーチンネイティブKotlin Webフレームワーク
- **モバイルBFFパターン**: モバイルAPI通信を最適化するバックエンド集約レイヤー
- **OAuth 2.0 + JWT**: モバイルセキュリティのためのサーバーサイドトークン管理
- **バックエンド統合**: HTTPクライアント設定、リクエスト集約、レジリエンスパターン
- **AWSデプロイ**: ECS/Fargate、ALB、オートスケーリング、VPCネットワーキング
- **テスト**: ユニットテスト（Kotest）、統合テスト（TestContainers）、負荷テスト（Gatling）
- **プロダクションパターン**: サーキットブレーカー、リトライ、キャッシング、可観測性、モバイル最適化

### 扱う主要技術

- **フレームワーク**: Ktor 3.3.0（軽量、コルーチンネイティブ）
- **データベース**: PostgreSQL + Exposed ORM
- **キャッシング**: Redis + Caffeine
- **レジリエンス**: Resilience4j（サーキットブレーカー、リトライ）
- **テスト**: Kotest、MockK、TestContainers
- **クラウド**: AWS ECS/Fargate、ALB、CloudWatch、Secrets Manager
- **認証**: OAuth 2.0 with PKCE、JWT検証

## このリポジトリでの作業方法

### ドキュメントを編集する際

1. **バイリンガル一貫性の維持**: アーキテクチャ概念の変更は、日本語と英語の両方のガイドに反映する必要があります
2. **学習進行の保持**: 日本語ガイドは慎重に設計された8部構成のシーケンスに従っています。セクション間の依存関係を尊重してください
3. **コード例**: すべてのコードスニペットは、適切なインポートを含む文法的に正しいKotlinであることを確認してください
4. **プロダクション重視**: コンテンツは実世界のプロダクションシステムを対象としており、おもちゃの例ではありません

### よくあるタスク

**新しいコンテンツの追加**:
- 日本語の段階的コンテンツは`docs/partN_topic.md`に配置し、`docs/index.md`で参照する必要があります
- 英語のプロダクションパターンは`docs/comprehensive-guide.md`にアーキテクチャ上の関心事ごとに整理して配置します
- 一貫したフォーマットを維持: 言語ヒント付きコードブロック、明確なセクションヘッダー、実用的な例

**技術情報の更新**:
- バージョン番号（特にKtor、Kotlin、AWSサービス機能）は最新である必要があります
- パフォーマンスベンチマークはソースを引用するか、おおよそのものとして明記してください
- セキュリティ推奨事項は現在のベストプラクティスに従ってください

**コンテンツのレビュー**:
- 日本語と英語のガイドがアーキテクチャの決定について矛盾していないか確認してください
- コード例がコンパイルできることを確認してください（このリポジトリにはビルドシステムがありませんが）
- AWSコスト見積もりが現在の価格を反映していることを確認してください（変更される可能性があります）

### コンテンツスタイルガイドライン

**日本語ガイド** (`index.md`, `partN_*.md`):
- 明確な前提条件を持つ段階的な学習構造
- 学習者の自己評価のための完了チェックリストを含む
- ステップバイステップの手順を含むハンズオン例
- バックエンド経験がほぼない中級Kotlinエンジニア向け

**英語ガイド** (`comprehensive-guide.md`):
- プロダクショングレードのパターンと実戦テスト済みの設定
- アーキテクチャ決定の根拠を含む
- パフォーマンスベンチマークとコスト最適化戦略
- プロダクションデプロイの意思決定を行う経験豊富な開発者向け

## ドキュメント作成の原則

1. **トレンドよりも正確性**: 最先端のアプローチよりも実証済みのパターンを優先
2. **プロダクションの現実**: 実際の課題（部分的な障害、コスト最適化、セキュリティ強化）に対処
3. **明確な根拠**: アーキテクチャの選択が*なぜ*重要なのかを説明し、*どのように*実装するかだけでなく
4. **モバイル特化**: コンテンツはモバイルBFFのユースケースに焦点を当て、一般的なWeb APIではありません
5. **学習志向**: 日本語コンテンツは概念を段階的に教え、英語コンテンツはリファレンスを提供

## Claude Codeへの注意事項

- このリポジトリには**ビルド、テスト、実行するコードがありません** - 純粋なドキュメントです
- コンテンツの品質に焦点を当ててください: 明確さ、正確さ、完全性、一貫性
- 改善を提案する際は、日本語と英語の両方の読者を考慮してください
- コンテンツを追加する際は、日本語ガイドの教育的な進行を尊重してください
- 技術的な正確性については、公式のKtor/Kotlin/AWSドキュメントを相互参照してください
- **必ず日本語でコミュニケーションを取ってください**
